"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const joi = require("joi");
const db_1 = require("../../db");
const response_1 = require("../../data/response");
const registerDataSchema = joi.array().items(joi.string().length(24)).required();
function remove(req, res, next) {
    joi.validate(req.query.users.split(","), registerDataSchema).then(function (value) {
        db_1.user.remove(value).then(function (result) {
            res.status(result.status).send({ message: result.message });
        }).catch(function (error) {
            res.status(500).send({ message: response_1.response.INTERNAL_ERROR });
        });
    }).catch(function ({ details }) {
        return res.status(400).send({ message: details[0].message.split('"').join('') });
    });
}
exports.remove = remove;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvYXBwaW52ZW50aXZyaC0wNTgvQXNoaXNoLXdvcmsvcmNjL2FwaS9jb250cm9sbGVycy91c2VyL3JlbW92ZS50cyIsInNvdXJjZXMiOlsiL2hvbWUvYXBwaW52ZW50aXZyaC0wNTgvQXNoaXNoLXdvcmsvcmNjL2FwaS9jb250cm9sbGVycy91c2VyL3JlbW92ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLDJCQUEyQjtBQUMzQixpQ0FBK0I7QUFDL0Isa0RBQStDO0FBRS9DLE1BQU0sa0JBQWtCLEdBQUcsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7QUFHakYsZ0JBQXVCLEdBQVksRUFBRSxHQUFhLEVBQUUsSUFBa0I7SUFDbEUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxLQUFLO1FBQzVFLFNBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVMsTUFBTTtZQUNuQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLE9BQU8sRUFBQyxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVMsS0FBSztZQUNuQixHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFDLE9BQU8sRUFBRSxtQkFBUSxDQUFDLGNBQWMsRUFBQyxDQUFDLENBQUM7UUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBUyxFQUFDLE9BQU8sRUFBQztRQUN2QixPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDbkYsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDO0FBVkQsd0JBVUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSwgTmV4dEZ1bmN0aW9uIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCAqIGFzIGpvaSBmcm9tICdqb2knO1xuaW1wb3J0IHsgdXNlciB9IGZyb20gJy4uLy4uL2RiJ1xuaW1wb3J0IHsgcmVzcG9uc2UgfSBmcm9tICcuLi8uLi9kYXRhL3Jlc3BvbnNlJztcblxuY29uc3QgcmVnaXN0ZXJEYXRhU2NoZW1hID0gam9pLmFycmF5KCkuaXRlbXMoam9pLnN0cmluZygpLmxlbmd0aCgyNCkpLnJlcXVpcmVkKCk7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UsIG5leHQ6IE5leHRGdW5jdGlvbikge1xuICAgIGpvaS52YWxpZGF0ZShyZXEucXVlcnkudXNlcnMuc3BsaXQoXCIsXCIpLCByZWdpc3RlckRhdGFTY2hlbWEpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdXNlci5yZW1vdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKHJlc3VsdC5zdGF0dXMpLnNlbmQoe21lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlfSk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7bWVzc2FnZTogcmVzcG9uc2UuSU5URVJOQUxfRVJST1J9KTtcbiAgICAgICAgfSk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oe2RldGFpbHN9KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7bWVzc2FnZTogZGV0YWlsc1swXS5tZXNzYWdlLnNwbGl0KCdcIicpLmpvaW4oJycpfSk7XG4gICAgfSk7XG59Il19