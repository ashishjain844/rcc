"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const joi = require("joi");
const db_1 = require("../../db");
const response_1 = require("../../data/response");
const registerDataSchema = joi.object().keys({
    ids: joi.array().items(joi.string()).required(),
    update: joi.object().keys({
        name: joi.string(),
        dob: joi.date(),
        statusCode: joi.number().valid(0, 1, 2, 3, 4)
    })
});
function update(req, res, next) {
    console.log(req.body);
    joi.validate(req.body, registerDataSchema).then(function (value) {
        db_1.user.update(value).then(function (result) {
            res.status(result.status).send({ message: result.message });
        }).catch(function (error) {
            res.status(500).send({ message: response_1.response.INTERNAL_ERROR });
        });
    }).catch(function ({ details }) {
        return res.status(400).send({ message: details[0].message.split('"').join('') });
    });
}
exports.update = update;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvYXBwaW52ZW50aXZyaC0wNTgvQXNoaXNoLXdvcmsvcmNjL2FwaS9jb250cm9sbGVycy91c2VyL3VwZGF0ZS50cyIsInNvdXJjZXMiOlsiL2hvbWUvYXBwaW52ZW50aXZyaC0wNTgvQXNoaXNoLXdvcmsvcmNjL2FwaS9jb250cm9sbGVycy91c2VyL3VwZGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLDJCQUEyQjtBQUMzQixpQ0FBK0I7QUFDL0Isa0RBQStDO0FBRS9DLE1BQU0sa0JBQWtCLEdBQUcsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztJQUN6QyxHQUFHLEVBQUUsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxRQUFRLEVBQUU7SUFDL0MsTUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUM7UUFDdEIsSUFBSSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUU7UUFDbEIsR0FBRyxFQUFFLEdBQUcsQ0FBQyxJQUFJLEVBQUU7UUFDZixVQUFVLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQ2hELENBQUM7Q0FDTCxDQUFDLENBQUM7QUFHSCxnQkFBdUIsR0FBWSxFQUFFLEdBQWEsRUFBRSxJQUFrQjtJQUNsRSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QixHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxLQUFLO1FBQzFELFNBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVMsTUFBTTtZQUNuQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLE9BQU8sRUFBQyxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVMsS0FBSztZQUNuQixHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFDLE9BQU8sRUFBRSxtQkFBUSxDQUFDLGNBQWMsRUFBQyxDQUFDLENBQUM7UUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBUyxFQUFDLE9BQU8sRUFBQztRQUN2QixPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDbkYsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDO0FBWEQsd0JBV0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSwgTmV4dEZ1bmN0aW9uIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCAqIGFzIGpvaSBmcm9tICdqb2knO1xuaW1wb3J0IHsgdXNlciB9IGZyb20gJy4uLy4uL2RiJ1xuaW1wb3J0IHsgcmVzcG9uc2UgfSBmcm9tICcuLi8uLi9kYXRhL3Jlc3BvbnNlJztcblxuY29uc3QgcmVnaXN0ZXJEYXRhU2NoZW1hID0gam9pLm9iamVjdCgpLmtleXMoe1xuICAgIGlkczogam9pLmFycmF5KCkuaXRlbXMoam9pLnN0cmluZygpKS5yZXF1aXJlZCgpLFxuICAgIHVwZGF0ZTogam9pLm9iamVjdCgpLmtleXMoe1xuICAgICAgICBuYW1lOiBqb2kuc3RyaW5nKCksXG4gICAgICAgIGRvYjogam9pLmRhdGUoKSxcbiAgICAgICAgc3RhdHVzQ29kZTogam9pLm51bWJlcigpLnZhbGlkKDAsIDEsIDIsIDMsIDQpXG4gICAgfSlcbn0pO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGUocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pIHtcbiAgICBjb25zb2xlLmxvZyhyZXEuYm9keSk7XG4gICAgam9pLnZhbGlkYXRlKHJlcS5ib2R5LCByZWdpc3RlckRhdGFTY2hlbWEpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdXNlci51cGRhdGUodmFsdWUpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKHJlc3VsdC5zdGF0dXMpLnNlbmQoe21lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlfSk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7bWVzc2FnZTogcmVzcG9uc2UuSU5URVJOQUxfRVJST1J9KTtcbiAgICAgICAgfSk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oe2RldGFpbHN9KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7bWVzc2FnZTogZGV0YWlsc1swXS5tZXNzYWdlLnNwbGl0KCdcIicpLmpvaW4oJycpfSk7XG4gICAgfSk7XG59Il19